<!DOCTYPE html>
<html class="no-js" lang="en_GB">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#fff">
<title>PHP - Como utilizar o Gettext para traduções [Parte 1]</title>
<meta name="description" content="A linguagem PHP está repleta de extensões. Uma muito utilizada e útil é o Gettext que nos permite traduzir um site muito facilmente.">
<link rel="canonical" href="https://henriquedias.com/blog/php-como-utilizar-o-gettext-para-traducoes/">
<link rel="publisher" href="https://plus.google.com/+HenriqueDias"/>

<meta property="og:locale" content="en_GB" />
<meta property="og:type" content="article" />
<meta property="og:title" content="PHP - Como utilizar o Gettext para traduções [Parte 1]" />
<meta property="og:description" content="A linguagem PHP está repleta de extensões. Uma muito utilizada e útil é o Gettext que nos permite traduzir um site muito facilmente." />
<meta property="og:url" content="https://henriquedias.com/blog/php-como-utilizar-o-gettext-para-traducoes/" />
<meta property="og:site_name" content="Henrique Dias" />
<meta property="article:publisher" content="https://www.facebook.com/hacdias" />
<meta property="article:author" content="https://www.facebook.com/hacdias" />
<meta property="article:tag" content="Gettext, PHP, Tutorial" />
<meta property="article:section" content="Tutorials" />
<meta property="article:published_time" content="2014-09-21T11:07:03&#43;00:00" />
<meta property="article:modified_time" content="2014-09-21T11:07:03&#43;00:00" />
<meta property="og:updated_time" content="2014-09-21T11:07:03&#43;00:00" /> 
<meta property="og:image" content="https://henriquedias.com/images/gettext.jpg" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:description" content="A linguagem PHP está repleta de extensões. Uma muito utilizada e útil é o Gettext que nos permite traduzir um site muito facilmente."/>
<meta name="twitter:title" content="PHP - Como utilizar o Gettext para traduções [Parte 1]"/>
<meta name="twitter:site" content="@hacdias"/>
<meta name="twitter:domain" content="Henrique Dias"/>
<meta name="twitter:image:src" content="https://henriquedias.com/images/gettext.jpg"/>
<meta name="twitter:creator" content="@hacdias"/>

<meta name="msvalidate.01" content="B471CBBC9EF6900039C6BBF251EF277C" />
<meta name="google-site-verification" content="nVQ4_x6m6ZTRAzclMPNxpB0iMgK-xoIj_d-l85u32nY" />

<link rel="shortcut icon" href="https://henriquedias.com/favicon.ico" type="image/x-icon">
<link rel="icon" href="https://henriquedias.com/favicon.ico" type="image/x-icon">
<link rel="icon" sizes="192x192" href="/icon.png">

<link href="https://fonts.googleapis.com/css?family=Merriweather:300,300i,500,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Noto+Sans:400,400i,700,700i" rel="stylesheet">

<link rel="stylesheet" href="https://henriquedias.com/css/normalize.css">
<link rel="stylesheet" href="https://henriquedias.com/css/main.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>

<script src="/app.js" async></script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Person",
  "email": "mailto:hacdias@gmail.com",
  "image": "https://henriquedias.com/henrique.jpg",
  "jobTitle": "Author",
  "name": "Henrique Dias",
  "telephone": "351 965 856 140",
  "url": "https://henriquedias.com/",
  "sameAs" : [ "http://www.facebook.com/hacdias",
      "http://twitter.com/hacdias",
      "http://instagram.com/hacdias",
      "http://www.linkedin.com/in/hacdias",
      "http://plus.google.com/+HenriqueDias"]
}
</script>

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": "Henrique Dias",
  "name": "PHP - Como utilizar o Gettext para traduções [Parte 1]",
  "datePublished": "2014-09-21",
  "headline": "A linguagem PHP está repleta de extensões. Uma muito utilizada e útil é o Gettext que nos permite traduzir um site muito facilmente.",
  "image": "https://henriquedias.com/gettext"
}
</script>

</head>

<body>
    <nav>
        <a href="https://henriquedias.com/">
            Henrique Dias
            <span>Programmer</span>
        </a>

        <ul>
            
            
            <li><a href="/about/" >About</a></li>
            
            <li><a href="/blog/" >Blog</a></li>
            
            <li><a href="/projects/" >Projects</a></li>
            
            <li><a href="/donate/" >Donate</a></li>
            
            <li><a href="/pgp/" >PGP Key</a></li>
            
        </ul>
        
        <div>
            <a href="mailto:hacdias@gmail.com"><i class="fa fa-envelope" aria-hidden="true"></i></a>
            <a href="https://linkedin.com/in/hacdias"><i class="fa fa-linkedin" aria-hidden="true"></i></a>
            <a href="https://github.com/hacdias"><i class="fa fa-github" aria-hidden="true"></i></a>
            <a href="https://twitter.com/hacdias"><i class="fa fa-twitter" aria-hidden="true"></i></a>
            <a href="https://instagram.com/hacdias"><i class="fa fa-instagram" aria-hidden="true"></i></a>
            <a href="https://facebook.com/hacdias"><i class="fa fa-facebook" aria-hidden="true"></i></a>
            <a href="https://stackoverflow.com/users/2681565/henrique-dias"><i class="fa fa-stack-overflow" aria-hidden="true"></i></a>
            <a href="https://medium.com/@hacdias"><i class="fa fa-medium" aria-hidden="true"></i></a>
        </div>
    </nav>


<main role="main" class="single">
    <article>
    <header>
    <img src="https://henriquedias.com/images/gettext.jpg">
    <time datetime="2014-09-21">September 21, 2014</time>
    <h1>PHP - Como utilizar o Gettext para traduções [Parte 1]</h1>
    </header>

    

<p>Como prometido no <a href="/explanations/php-wordpress-comandos-printf-sprintf/">último artigo</a>, hoje irá começar uma pequena saga de dois ou três artigos sobre como utilizar o Gettext no PHP.</p>

<p>Com o <strong>gettext</strong> podemos ter um site disponível em diversas linguagens de forma muito fácil e sem complicações. Nesta primeira parte, irá ser abordado como <strong>configurar o gettext</strong> e as suas <strong>funções</strong>.</p>

<p>O gettext pode ser configurado no PHP através de uma extensão nativa ou através do uso de uma biblioteca separada.Nós iremos utilizar o segundo método por ser mais simples e fácil de configurar.</p>

<h2 id="download-e-estruturação">Download e estruturação</h2>

<p>Antes de mais nada, aviso que é <strong>necessário</strong> ter a extensão <em>mbstring</em> ativada nas definições do PHP. Em primeiro lugar, deve fazer o <em>download</em> do <strong>php-gettext</strong> nesta <a href="https://launchpad.net/php-gettext/">página</a>.</p>

<p>Depois de efetuar o <em>download</em>, irá ter que descompactar o ficheiro transferido. Após a sua descompactação irá encontrar diversos ficheiros. Apenas iremos precisar dos seguintes:</p>

<ul>
<li><code>gettext.inc</code> → Aliases de funções para utilizar no sistema;</li>
<li><code>gettext.php</code> → Funções do gettext;</li>
<li><code>streams.php</code> → Classes e métodos que permitem ler ficheiros do gettext.</li>
</ul>

<p>Agora crie uma pasta cujo conteúdo seja semelhante ao seguinte:</p>

<pre><code class="language-bash">site-multi-lingua/
  | lib /
  |     | gettext.inc
  |     | gettext.php
  |      streams.php
  |
  | langs/
  |
  |
  | config.php
  | i18n.php
   index.php
</code></pre>

<p>Como pode visualizar, os ficheiros do gettext foram colocados dentro de uma pasta chamada `<code>lib</code> e ainda foram adicionados três outros ficheiros:</p>

<ul>
<li><code>config.php</code> → faz o carregamento das configurações;</li>
<li><code>i18n.php</code> → contém a inicialização do gettext;</li>
<li><code>index.php</code></li>
</ul>

<p>Inicialmente tem que ser definida uma linguagem padrão. Nós iremos utilizar &ldquo;pt_PT&rdquo; ou seja, Português de Portugal.</p>

<p>Para isso, edite o seu ficheiro _config.php _e coloque o seguinte:</p>

<pre><code class="language-php">&lt;?php

define('LANG','pt_PT');
</code></pre>

<h2 id="inicialização-do-gettext">Inicialização do Gettext</h2>

<p>Agora que já existe uma linguagem padrão definida, a inicialização do gettext deve ser feita porém, primeiro tem que memorizar os seguintes conceitos:</p>

<ul>
<li><p><code>locale</code> → uma <em>string</em> no formato <code>xx_XX</code> que indica a linguagem. &ldquo;pt_BR&rdquo; é português do Brasil, &ldquo;en<em>US&rdquo; corresponde a Inglês dos Estados Unidos. Pode ler mais sobre estes prefixos [aqui](<a href="http://pt.wikipedia.org/wiki/Internacionaliza%C3%A7%C3%A3o">http://pt.wikipedia.org/wiki/Internacionaliza%C3%A7%C3%A3o</a></em>(software)).</p></li>

<li><p><code>textdomain</code> → quer dizer &ldquo;domínio de texto&rdquo; e é um local onde as traduções vão ser colocadas. No nosso caso, apenas iremos utilizar um <em>textdomain</em>.</p></li>
</ul>

<p>Agora, deve colocar no ficheiro <strong>i18n.php </strong>o seguinte conteúdo:</p>

<pre><code class="language-php">&lt;?php

require_once('config.php');

$locale = LANG;
$textdomain = &quot;site_multi_lingua&quot;;
$locales_dir = dirname(__FILE__) . '/lang';

if (isset($_GET['lang']) &amp;&amp; !empty($_GET['lang']))
  $locale = $_GET['lang'];

putenv('LANGUAGE=' . $locale);
putenv('LANG=' . $locale);
putenv('LC_ALL=' . $locale);
putenv('LC_MESSAGES=' . $locale);

require_once('lib/gettext.inc');

_setlocale(LC_ALL, $locale);
_setlocale(LC_CTYPE, $locale);

_bindtextdomain($textdomain, $locales_dir);
_bind_textdomain_codeset($textdomain, 'UTF-8');
_textdomain($textdomain);

function _e($string) {
  echo __($string);
}
</code></pre>

<p>Poça! Tanta coisa! Mas para que serve tudo isto? Na <strong>linha 3</strong>, o ficheiro <code>config.php</code> é chamado pois é este que contém a constante da linguagem. Assim podemos já podemos utilizar essa constante neste ficheiro.</p>

<p>Nas linhas seguintes (<strong>5 a 7</strong>), a variável <code>$locale</code> é definida, tal como o domínio de texto e o local onde irão estar os ficheiros de tradução que, neste caso, será numa pasta chamada lang .</p>

<p>Mais à frente, nas <strong>linhas 8 a 9</strong>, verificamos se existe uma variável chamada <code>lang</code> a ser passada pelo URL. Se sim, reescrevemos o valor da variável <code>$locale</code> com essa linguagem.</p>

<p>Nas linhas seguintes, <strong>12 a 5</strong>, as variáveis de ambiente do sistema operativo são alteradas para o locale  que está a ser utilizado.</p>

<p>Na linha cuja posição é <strong>17</strong>, a biblioteca php-gettext é carregada sendo logo a seguir (<strong>19 a 20</strong>), o locale também carregado para o gettext.</p>

<p>Seguidamente, <strong>nas linhas 22 a 24</strong>, o textdomain é defido, tal como a codificação que será utilizada nesses ficheiros (UTF-8) e ainda dizemos onde vão estar as traduções.</p>

<p>De seguida é criada uma função chamada <code>_e()</code> que nos permite imprimir o resultado da função <code>__()</code>.</p>

<p>Agora, copiem e colem o seguinte no <code>index.php</code>:</p>

<pre><code class="language-php">&lt;?php
require_once('i18n.php');
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;title&gt;&lt;?php echo __('Olá Mundo!'); ?&gt;&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;h1&gt;&lt;?php _e('Olá Mundo!'); ?&gt;&lt;/h1&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>De momento, ainda não existe nada de extraordinário a acontecer. Na próxima parte deste tutorial iremos falar em como criar as traduções!</p>

    
    <footer>
    <div class="share">
        <a class="twitter" target="_blank" href="https://twitter.com/share?url=https%3a%2f%2fhenriquedias.com%2fblog%2fphp-como-utilizar-o-gettext-para-traducoes%2f&via=hacdias">
      <i class="fa fa-twitter"></i>
    </a>
        <a class="facebook" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fhenriquedias.com%2fblog%2fphp-como-utilizar-o-gettext-para-traducoes%2f">
      <i class="fa fa-facebook"></i>
    </a>
        <label for="disqus">
      <i class="fa fa-comments"></i>
    </label>
        <a class="gplus" target="_blank" href="https://plus.google.com/share?url=https%3a%2f%2fhenriquedias.com%2fblog%2fphp-como-utilizar-o-gettext-para-traducoes%2f">
      <i class="fa fa-google-plus"></i>
    </a>
        <a class="linkedin" target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fhenriquedias.com%2fblog%2fphp-como-utilizar-o-gettext-para-traducoes%2f&title=PHP%20-%20Como%20utilizar%20o%20Gettext%20para%20tradu%c3%a7%c3%b5es%20%5bParte%201%5d&source=Henrique%Dias">
      <i class="fa fa-linkedin"></i>
    </a>
    </div>

    <div class="nextprev">
        <div>
            
            <a href="https://henriquedias.com/blog/php-wordpress-comandos-printf-sprintf/">
                <h4>Previous Project</h4>
                <span>PHP e WordPress: comandos &#39;printf&#39; e &#39;sprintf&#39;</span>
            </a>
            
        </div>
        <div>
            
            <a href="https://henriquedias.com/blog/php-como-utilizar-o-gettext-para-traducoes-parte-2/">
                <h4>Next Project</h4>
                <span>PHP - Como utilizar o Gettext para traduções [Parte 2]</span>
            </a>
            
        </div>
    </div>

    <div style="clear:both"></div>
    <input type="checkbox" id="disqus">
    <div>
        <div><div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'hacdias';
    var disqus_identifier = 'https:\/\/henriquedias.com\/blog\/php-como-utilizar-o-gettext-para-traducoes\/';
    var disqus_title = 'PHP - Como utilizar o Gettext para traduções [Parte 1]';
    var disqus_url = 'https:\/\/henriquedias.com\/blog\/php-como-utilizar-o-gettext-para-traducoes\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></div>
    </div>
</footer>
    
    </article>
</main>

<footer>
    <p>&copy; Henrique Dias - made with <a href="http://gohugo.io/">Hugo</a> and <span>&#10084;</span></p>
</footer>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59697241-1', 'auto');
  ga('send', 'pageview');
</script>

<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

